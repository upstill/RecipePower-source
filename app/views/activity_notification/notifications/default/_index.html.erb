<div class="notification_wrapper <%= 'open opened' if parameters[:opened] %>">
  <a class="dropdown_notification" onclick="RP.navbar.toggleNotifications(event);">
    <p class="notification_count" id="notification_count">
      <span class="<%= 'unopened' if @target.has_unopened_notifications?(parameters) %>">
        <%= @target.unopened_notification_count(parameters) %>
      </span>
    </p>
  </a>

  <div class="notification_list_wrapper">
    <div class="notification_header_wrapper">
      <p class="notification_header_title">
        Notifications
      </p>

      <p class="notification_header_menu">
        <%= link_to "Open all", open_all_notifications_path_for(@target, parameters), method: :post, remote: true %>
        <% if @target.class.subscription_enabled? %>
            <%= link_to "Subscriptions", subscriptions_path_for(@target) %>
        <% end %>
      </p>
    </div>
    <div class="notifications">
      <% if content = yield(:notification_index).if_present %>
          <%= content %>
      <% else %>
          <div style="margin:10px">No pending notifications</div>
      <% end %>
    </div>
    <div class="notification_link_wrapper">
      <p class="notification_link">
        <%= link_to_submit 'All notifications', notifications_path_for(@target) %>
      </p>
    </div>
  </div>
</div>
