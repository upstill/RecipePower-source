<%= modal_dialog :new_channel, "Add a Channel" do %>
    <% @reftype = @referent.type %>
    <%= simple_form_for(@referent.becomes(Referent)) do |f| %>
        <%= form_errors_helper f %>
        <% f.object = f.object.becomes ChannelReferent %>
        <% f.object.type = @reftype %>
        <%= f.hidden_field :typenum %>
        <%# f.input :dependent,
                    :label => false,
                    :inline_label => "Use Existing Tag (vs. building a freestanding channel)",
                    :as => :boolean %>
        <div class="row">
          <div class="col-md-12">
            <%= f.input :tag_token, label: "Primary Tag (make one up if none fits)", :id => "referent_channel_tag", data: {pre: ""} %>
          </div>
        </div>
        <%= f.simple_fields_for :user do |builder| %>
            <%= render "shared/pic_preview_field",
                       :f => builder,
                       :urlfield => :image %>
            <br>
            <div class="row">
              <div class="col-md-12">
                <%= builder.input :about, label: "Description" %>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <%= taggable_div builder, "control-group", "Other tags this channel watches" %>
              </div>
            </div>
        <% end %>
        <%= form_actions f, submit_label: "Build Channel" %>
    <% end %>
<% end %>